<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MSTV Player</title>
    <script src="shaka.js"></script>
    <style>
        body { margin: 0; background: #000; color: #fff; font-family: sans-serif; text-align: center; }
        video { width: 100%; max-width: 800px; background: #111; margin-top: 0; }
    </style>
</head>
<body>
    <video id="video" controls autoplay crossorigin="anonymous"></video>

    <script>
        // Stream array: add new streams here as needed
        const streamList = [
    {
        name: "Zee TV (DASH ClearKey)",
        type: "dash",
        url: "https://d1g8wgjurz8via.cloudfront.net/bpk-tv/Zeetv/default/main.mpd",
        drm: { clearKeys: { "ed068cf84f0640ccbc7c0e395c0a272e": "bb722190f2bb446391020411a7d0828b" } }
    },
    {
        name: "And Tv (DASH ClearKey)",
        type: "dash",
        url: "https://d1gBwgjurz8via.cloudfront.net/bpk-tv/Andtv/default/main.mpd",
        drm: { clearKeys: { "260f86eeebb04d7fbc45c948f76e81fd": "5f3a23f1a73c4c96abahce5fffe7b06b" } }
    },
    { name: "And Tv", type: "hls", url: "https://amg01117-amg01117c1-amgplt0029.playout.now3.amagi.tv/ts-eu-w1-n2/playlist/amg01117-amg01117c1-amgplt0029/ddb9c46c-1491-11f1-96a5-c209a4167668/36/1280x720_2657600/index.m3u8"},
    { name: "Real IPTV", type: "hls", url: "https://restream-live.realiptv.to/live/ALEX/sg5ng25ikf/3973.m3u8" },
    { name: "BozzTV", type: "hls", url: "https://live20.bozztv.com/giatvplayout7/giatv-209592/index.m3u8" },
    { name: "Star Gold Proxy", type: "hls", url: "https://anywhere.pwisetthon.com/http://tvn2.chowdhury-shaheb.com/stargold/tracks-v1a1/mono.m3u8" },
    { name: "Zee Cinema Hd", type: "hls", url: "https://amg17931-zee-amg17931c5-kogan-au-9521.playouts.now.amagi.tv/ts-eu-w1-n2/playlist/amg17931-asiatvusaltdfast-zeecinema-koganau/cb7c3e1a7b776f88cfca3f6cd2f940a0d10530d05d33d33d6ba056c226c3150d8ceda7c9eb1aea697ec062812b53310d0c78ce07de6c19bb8724ed193f6c662acedaed228d891309b9c874333ac23a5e0dab6940825e0a6696bc495fcb6ee3394d38c03d437a7ecdb100f62342b2d559d020309bde852366200f409e5e54fba040a3e1e14d38873ef8ed4958f67e13b6c01bd6d11fbc9ed75d8c57817ef1129dc7f0d8ce118683c47ea856e465440024289dcd2d969f0ae58f9c3c68982829742b3f95cb63785046e466761e91dedeac71ed12c28024f3125dd92fbb3f4bb41709d06e88e24ba1a3b2de382173c4961d0923d129dcb0ff6eec9dc682406b7a8ba71ff7343237e878cb3639399cf4ca5bb7da1198b33abf56087737ed9e5f9291be82a0e5c31adc6de6cefa8d25190e420a069452ab9e2d8a798638838753004c5d48a8ad50c6add04a7f371cd1ce0d82535392f3bfaef3427bc669105fa847dc580e6385744f74f722f49f733dda7f44d57b6db50875ad4dfeb120f0e7e8e4003aa7d78817ac38a1e65ca09b68ce4c325d10bcfb282d271d2daa8e6c6e612b93a585607508da6f99d7513882f3ae0a1a38fbf5f81a90dc/120/1280x720_2657600/index.m3u8"}
];
        // Automatically pick last path segment
        const pathSegments = window.location.pathname.split("/").filter(Boolean);
        const lastSegment = pathSegments[pathSegments.length - 1];
        let index = parseInt (lastSegment, 10) - 1;
        if (isNaN(index) || index < 0 || index >= streamList.length) index = 0;

        const stream = streamList[index];

        async function startTest() {
            const video = document.getElementById('video');

            if (typeof shaka === 'undefined') return;

            shaka.polyfill.installAll();
            const player = new shaka.Player(video);

            player.addEventListener('error', (event) => {
                console.error("Shaka Error:", event.detail);
            });

            try {
                if (stream.type === "dash" && stream.drm) {
                    player.configure({ drm: stream.drm });
                }

                await player.load(stream.url);
            } catch (e) {
                console.error("Load failed:", e);
            }
        }

        document.addEventListener('DOMContentLoaded', startTest);
    </script>
</body>
</html>
