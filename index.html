<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="description" content="MSTV Network offers a variety of live TV channels including music, movies, and more. Watch your favorite channels online for free.">
    <meta name="keywords" content="live TV, MSTV Network, free TV, live channels, streaming, music, bollywood, saga music">
    <meta name="robots" content="index, follow">
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="MSTV Network">
    <meta property="og:description" content="Stream live TV channels including music, movies, and more on MSTV Network.">
    <meta property="og:image" content="https://raw.githubusercontent.com">
    <meta property="og:url" content="https://mstvnet.netlify.app">
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="MSTV Network">
    <meta name="twitter:description" content="Stream live TV channels including music, movies, and more on MSTV Network.">
    <meta name="twitter:image" content="https://raw.githubusercontent.com">
    <meta name="twitter:url" content="https://mstvnet.netlify.app">

    <!-- JSON-LD Schema.org -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebPage",
        "name": "MSTV Network",
        "description": "Stream live TV channels including music, movies, and more.",
        "url": "https://mstvnet.netlify.app",
        "publisher": {
            "@type": "Organization",
            "name": "MSTV Network",
            "logo": {
                "@type": "ImageObject",
                "url": "https://raw.githubusercontent.com"
            }
        }
    }
    </script>
    
    <title>MSTV Network</title>

    <!-- FIX 1: HLS Library placed in HEAD with FULL path to prevent ReferenceError -->
    <script src="https://cdn.jsdelivr.net"></script>

    <style>
       /* Original CSS from Part 1 & 2 */
       body { margin: 0; padding: 0; font-family: 'Poppins', sans-serif; color: #E0E0E0; background: #0F1115; }
       .title-3d { font-size: 3.5em; text-align: center; margin-top: 40px; margin-bottom: 30px; color: #FFFFFF; text-shadow: 0 4px 8px rgba(0, 0, 0, 0.4); letter-spacing: 2px; font-weight: 700; }
       .scrolling-container { width: 100%; overflow: hidden; background: #1A1D20; border: none; padding: 15px 0; box-sizing: border-box; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3); }
       .scrolling-content { display: inline-flex; align-items: center; gap: 40px; padding-left: 100%; white-space: nowrap; animation: scroll-text-logos 40s linear infinite; font-size: 1.1em; color: #90EE90; font-weight: 500; }
       .inline-logo { height: 35px; vertical-align: middle; filter: brightness(0.9); transition: filter 0.3s ease; }
       .inline-logo:hover { filter: brightness(1.2); }
       @keyframes scroll-text-logos { 0% { transform: translateX(0%); } 100% { transform: translateX(-100%); } }
       .channel-selector-text { text-align: center; font-size: 1.8em; margin: 4vh 0 2vh; color: #FFFFFF; font-weight: 600; }
       .channel-selection { margin-bottom: 5vh; display: flex; justify-content: center; }
       select { padding: 0.7em 1.5em; font-size: 1.2em; background: #1A1D20; color: #90EE90; border: 1px solid #90EE90; border-radius: 8px; outline: none; width: 90%; max-width: 450px; text-align: center; appearance: none; cursor: pointer; background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%2390EE90%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13.2-6.4H18.4c-6.5%200-12.3%203.8-15.8%209.7-3.5%205.9-3.2%2013.3.7%2018.9l132.4%20140.7c4.3%204.6%2010.1%207.1%2016.1%207.1s11.8-2.5%2016.1-7.1l132.4-140.7c3.9-5.6%204.2-13.1.7-18.9z%22%2F%3E%3C%2Fsvg%3E'); background-repeat: no-repeat; background-position: right 1em top 50%; background-size: 0.65em auto; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3); }
       .player-container { position: relative; width: 90%; max-width: 1100px; aspect-ratio: 16 / 9; margin: 0 auto 60px; border-radius: 12px; overflow: hidden; background: #1A1D20; box-shadow: 0 8px 16px rgba(0, 0, 0, 0.5); transition: transform 0.3s ease, box-shadow 0.3s ease; }
       .player-container:hover { transform: translateY(-5px); box-shadow: 0 12px 24px rgba(0, 0, 0, 0.6); }
       .player-container iframe, .player-container video, #placeholder-image { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: 12px; }
       .live-stamp { position: absolute; top: 1.5vw; left: 1.5vw; background: #E50914; color: white; font-family: 'Poppins', sans-serif; font-weight: 700; font-size: clamp(14px, 1.5vw, 20px); padding: 0.4vw 1.6vw; min-width: 120px; min-height: 32px; display: flex; align-items: center; justify-content: center; border-radius: 0.6vw; z-index: 999; box-shadow: 0 0.5vw 1vw rgba(0, 0, 0, 0.4); letter-spacing: 0.1vw; }
       .loading-indicator { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 1.2em; background: rgba(0, 0, 0, 0.7); color: #90EE90; padding: 12px 25px; border-radius: 8px; display: none; z-index: 15; text-align: center; }
       .logo-overlay { position: absolute; bottom: 15px; right: 15px; width: 100px; opacity: 0.7; z-index: 12; }
       footer { padding: 50px 20px; color: #A0A0A0; font-family: 'Poppins', sans-serif; background: #1A1D20; border-top: 1px solid rgba(255, 255, 255, 0.05); margin-top: 60px; }
       .footer-section { display: flex; flex-wrap: wrap; justify-content: space-around; gap: 30px; max-width: 1200px; margin: 0 auto; }
       .footer-column { flex: 1 1 auto; min-width: 250px; padding: 15px; }
       .footer-column h2, .footer-column h3 { color: #FFFFFF; font-weight: 600; margin-bottom: 15px; }
       .footer-column p { font-size: 0.95rem; line-height: 1.8; color: #C0C0C0; text-align: left; }
       .footer-column a { color: #90EE90; text-decoration: none; transition: color 0.3s ease; }
       .facebook-follow { text-align: center; margin: 40px 0; }
       .facebook-follow a { display: inline-flex; align-items: center; color: #1877F2; font-weight: 600; text-decoration: none; gap: 10px; }
       .copyright { text-align: center; color: #808080; margin-top: 30px; font-size: 0.85rem; }
       @media (max-width: 768px) { .title-3d { font-size: 2.5em; } .footer-column { text-align: center; } .footer-column p { text-align: center; } }
    </style>
</head>
<body>

   <div class="title-3d">AAINA DTH FREE</div>
    
   <div class="scrolling-container">
      <div class="scrolling-content">
             üåç AAINA DTH FREE‚Äì Your Gateway to Free Live TV! Music, Movies, Drama & More, Anytime, Anywhere! | 50+ Free Channels, 24/7 Entertainment, Zero Subscription, 100% Fun!
      </div>
   </div>
    
   <div class="channel-selector-text">Select Channel</div>
   <div class="channel-selection">
      <select id="channel-select">
         <option value="">üëâüì∫üì∫üì∫</option>
      </select>
   </div>
        
   <div class="player-container" id="player-container">
          <iframe id="media-player" allow="autoplay; encrypted-media; picture-in-picture" sandbox="allow-scripts allow-same-origin allow-presentation"></iframe>
          <video id="video-player" autoplay playsinline muted style="display:none; object-fit: cover;"></video>
          <img id="placeholder-image" src="Design-Studio-2025-01-22 (1).png" alt="Stream Placeholder" />
          <div class="live-stamp" id="live-stamp" style="display:none;">MSTV NETWORK</div>
          <div class="loading-indicator" id="loading">Loading stream...</div>
          <img src="/logo.png" class="logo-overlay" alt="MSTV Logo" />
   </div>
     
   <div class="facebook-follow">
          <a href="https://www.facebook.com" target="_blank">
            <img src="https://upload.wikimedia.org" width="24" alt="FB" />
            Click to follow
          </a>
   </div>
     
   <footer>
      <div class="footer-section">
         <div class="footer-column">
            <h2>‚úÖ About Us</h2>
            <p>MSTV Network is a free streaming platform bringing you 24/7 access to music, movies, news, and more.</p>
            <h3>‚ö†Ô∏è Disclaimer</h3>
            <p>We stream content freely available on public platforms. All copyrights remain with owners.</p>
         </div>
         <div class="footer-column">
            <h2>Contact</h2>
            <p>Email: contact@mstvindia.com</p>
         </div>
      </div>
      <div class="copyright">¬© 2025 MSTV INDIA. All rights reserved.</div>
   </footer>

  <script>
    const select = document.getElementById('channel-select');
    const videoPlayer = document.getElementById('video-player');
    const iframePlayer = document.getElementById('media-player');
    const placeholder = document.getElementById('placeholder-image');
    const loading = document.getElementById('loading');
    const liveStamp = document.getElementById('live-stamp');
    const playerContainer = document.getElementById('player-container');

    let hlsInstance = null;
    let channelsData = [];
    let lastKnownJsonContent = null;

    const JSON_URL = "./channels.json";

    function showLoading(show) {
        loading.style.display = show ? 'block' : 'none';
    }

    function stopAllPlayback() {
        if (hlsInstance) { hlsInstance.destroy(); hlsInstance = null; }
        videoPlayer.pause();
        videoPlayer.style.display = 'none';
        iframePlayer.src = '';
        iframePlayer.style.display = 'none';
        liveStamp.style.display = 'none';
    }

    function triggerFullscreen(element) {
        if (!element) return;
        if (element.requestFullscreen) {
            element.requestFullscreen();
        } else if (element.webkitRequestFullscreen) { // Safari
            element.webkitRequestFullscreen();
        } else if (element.msRequestFullscreen) { // IE11
            element.msRequestFullscreen();
        }
    }

    function playChannel(channel) {
        showLoading(true);
        placeholder.style.display = 'none';
        stopAllPlayback();
        if (!channel) { placeholder.style.display = 'block'; showLoading(false); return; }

        if (channel.type === 'hls') {
            videoPlayer.style.display = 'block';
            if (typeof Hls !== 'undefined' && Hls.isSupported()) {
                hlsInstance = new Hls();
                hlsInstance.loadSource(channel.url);
                hlsInstance.attachMedia(videoPlayer);
                hlsInstance.on(Hls.Events.MANIFEST_PARSED, () => {
                    videoPlayer.play();
                    showLoading(false);
                    liveStamp.style.display = 'block';
                });
            } else if (videoPlayer.canPlayType('application/vnd.apple.mpegurl')) {
                videoPlayer.src = channel.url;
                videoPlayer.play().then(() => {
                    showLoading(false);
                    liveStamp.style.display = 'block';
                });
            }
        } else if (channel.type === 'iframe') {
            iframePlayer.src = channel.url;
            iframePlayer.style.display = 'block';
            showLoading(false);
            liveStamp.style.display = 'block';
        }
    }

    async function fetchChannelsJson() {
        try {
            const response = await fetch(`${JSON_URL}?t=${Date.now()}`);
            if (!response.ok) throw new Error('Fetch failed');
            const json = await response.json();
            const jsonString = JSON.stringify(json);

            if (lastKnownJsonContent !== jsonString) {
                lastKnownJsonContent = jsonString;
                channelsData = json;
                select.innerHTML = '<option value="">üëâüì∫üì∫üì∫</option>';
                channelsData.forEach((channel, index) => {
                    const option = document.createElement('option');
                    option.value = index;
                    option.textContent = channel.name;
                    select.appendChild(option);
                });
            }
        } catch (e) { console.error('JSON Error:', e); }
    }

    select.addEventListener('change', () => {
        const index = select.value;
        // instant fullscreen on channel selection
        triggerFullscreen(playerContainer);
        playChannel(index === '' ? null : channelsData[index]);
    });

    fetchChannelsJson();
    setInterval(fetchChannelsJson, 15000);
</script>
